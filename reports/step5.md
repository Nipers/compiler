# 实验报告

#### 计81 卢星宇 2018011280

## 任务概述 

1.改进语法

2.在irgen中添加OffsetManager以管理main函数中声明的变量,添加FrameSlot，Load，Store等

3.在minidecaf中添加decl标识符

4.Asm实现decl的编译，

5.初步管理栈帧

## 遇到的困难

由于一开始的框架是参照参考实现的最终版本，这一步有些无所适从，花了很长时间才最终决定暂时不实现Namer（名称解析器）而是暂时用一个字典来管理main函数的变量。在之后可能会有较大的改动

### 思考题

#### 第一题

答：

1. 用于表达式计算的运算栈，在不计算表达式时为空;
2. 用于存储当前可用的局部变量的空间，在不存在局部变量时为空;
3. 用于存储返回地址，旧的栈帧基址等信息的空间，存储返回地址和旧的栈帧基址各需要4字节。

#### 第二题

答：只需要在OffsetManager中取消对重名变量的检查即可，这样重复声明会与赋值语句达到同样的效果。

### 代码参考情况

使用了参考实现中的OffsetManager来管理变量。